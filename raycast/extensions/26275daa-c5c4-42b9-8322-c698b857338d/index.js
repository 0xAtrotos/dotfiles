var k=Object.defineProperty;var A=Object.getOwnPropertyDescriptor;var b=Object.getOwnPropertyNames;var E=Object.prototype.hasOwnProperty;var L=s=>k(s,"__esModule",{value:!0});var C=(s,n)=>{for(var c in n)k(s,c,{get:n[c],enumerable:!0})},I=(s,n,c,d)=>{if(n&&typeof n=="object"||typeof n=="function")for(let a of b(n))!E.call(s,a)&&(c||a!=="default")&&k(s,a,{get:()=>n[a],enumerable:!(d=A(n,a))||d.enumerable});return s};var T=(s=>(n,c)=>s&&s.get(n)||(c=I(L({}),n,1),s&&s.set(n,c),c))(typeof WeakMap!="undefined"?new WeakMap:0);var x={};C(x,{default:()=>P});var t=require("@raycast/api"),u=require("react"),m=require("child_process");function P(){let[s,n]=(0,u.useState)(!0),[c,d]=(0,u.useState)(),[a,h]=(0,u.useState)(),[w,S]=(0,u.useState)({}),g=e=>{let r=/\((\d+)\)\s+(.*?)\s+\(Hardware Port: (.*?), Device: (.*?)\)/g;return Array.from(e.matchAll(r)).map(i=>({id:i[1],name:i[2],hardwarePort:i[3],device:i[4],status:"disconnected"}))},f=e=>{(0,m.exec)(`/usr/sbin/networksetup -connectpppoeservice '${e.name}'`,(r,o)=>{if(r!=null){d(r);return}S({...w,[e.id]:{...e,status:"connected"}})})},N=e=>{(0,m.exec)(`/usr/sbin/networksetup -disconnectpppoeservice '${e.name}'`,(r,o)=>{if(r!=null){d(r);return}S({...w,[e.id]:{...e,status:"disconnected"}})})},v=()=>new Promise((e,r)=>{(0,m.exec)("/usr/sbin/networksetup -listnetworkserviceorder",(o,i)=>{o!=null?r(o):e(i.trim())})}),y=e=>new Promise((r,o)=>{(0,m.exec)(`/usr/sbin/networksetup -showpppoestatus '${e}'`,(i,l)=>{i!=null?o(i):r(l.trim())})});return(0,u.useEffect)(()=>{v().then(e=>{let r=["Wi-Fi","Bluetooth PAN","Thunderbolt Bridge"],[o]=e.split(`
`);return h(o),g(e).filter(l=>!r.includes(l.name))}).then(e=>{let r=e.map(async o=>y(o.name).then(i=>({...o,status:i})));Promise.all(r).then(o=>{let i=o.reduce((l,p)=>({...l,[p.id]:p}),{});S(i),n(!1)})}).catch(e=>{d(e)})},[]),c&&(0,t.showToast)(t.Toast.Style.Failure,"Something went wrong",c.message),_jsx(t.List,{isLoading:s},_jsx(t.List.Section,{title:a},Object.values(w).map(e=>e.status=="connected"?_jsx(t.List.Item,{icon:t.Icon.Checkmark,key:e.id,title:e.name,actions:_jsx(t.ActionPanel,null,_jsx(t.Action,{title:"Disconnect",onAction:()=>N(e)}))}):e.status=="disconnected"?_jsx(t.List.Item,{icon:t.Icon.Circle,key:e.id,title:e.name,actions:_jsx(t.ActionPanel,null,_jsx(t.Action,{title:"Connect",onAction:()=>f(e)}))}):_jsx(t.List.Item,{icon:t.Icon.XmarkCircle,key:e.id,title:e.name}))))}module.exports=T(x);0&&(module.exports={});
